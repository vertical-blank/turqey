@import turqey.servlet._

@(additional: Html = null)
<header>
  <script type="text/javascript" src="@assets/vender/js/knockout.js"></script>
  <nav id="topnav">
    <div class="container">
      <div class="nav-wrapper">
        <a href="@root/" class="brand-logo" style="font-family: Roboto;font-weight: 100;">TurQey</a>
        <ul class="right hide-on-med-and-down">
          @SessionHolder.user.map{ u =>
          <li><a href="@root/tag" class="waves-effect waves-light" style="color: white;">タグ一覧</a></li>
          <li><span data-bind="text: notifCount"></span></li>
          <li><a class="dropdown-button waves-effect waves-light" href="#" 
            data-activates="dropdown1"
            data-constrainwidth="false"
            data-beloworigin="true"
            data-alignment="right" >@u.name</a></li>
          @*<li><img src="@u.imgUrl" class="waves-effect waves-light"></li>*@
          }
        </ul>
        <a href="#" data-activates="mobile-menu" class="button-collapse right"><i class="material-icons">menu</i></a>
        <ul class="side-nav" id="mobile-menu">
            <li><a href="@root/tag" class="waves-effect waves-light"><i class="material-icons small left">label</i>タグ一覧</a></li>
            <li class="divider"></li>
            <li><a href="@root/user/self"><i class="material-icons small left">person</i>プロフィール</a></li>
            <li><a href="@root/article/edit"><i class="material-icons small left">edit</i>記事作成</a></li>
            <li><a href="@root/tag/followings"><i class="material-icons small left">star</i>フォロー中のタグ</a></li>
            <li class="divider"></li>
            @SessionHolder.user.map { u => @if(u.root){
              <li><a href="@root/user/"><i class="material-icons small left">people</i>ユーザ一覧</a></li>
            } }
            <li class="divider"></li>
            <li><a href="@root/logout"><i class="material-icons small left">exit_to_app</i>ログアウト</a></li>
        </ul>
      </div>
    </div>
  </nav>
<script>
$( document ).ready(function(){ $(".button-collapse").sideNav({edge: 'right'}); });
var TopnavVM = function (){
  var self = this;
  self.notifCount = ko.observable('');
};
ko.applyBindings(new TopnavVM(), document.getElementById('topnav'));
</script>
@additional
<ul id="dropdown1" class="dropdown-content" style="width: 13rem;overflow: hidden;">
  <li><a href="@root/user/self"><i class="material-icons small left">person</i>プロフィール</a></li>
  <li><a href="@root/article/edit"><i class="material-icons small left">edit</i>記事作成</a></li>
  <li><a href="@root/tag/followings"><i class="material-icons small left">star</i>フォロー中のタグ</a></li>
  <li class="divider"></li>
  @SessionHolder.user.map { u => if(u.root){
    <li><a href="@root/user/"><i class="material-icons small left">people</i>ユーザ一覧</a></li>
  } }
  <li class="divider"></li>
  <li><a href="@root/logout"><i class="material-icons small left">exit_to_app</i>ログアウト</a></li>
</ul>
</header>
